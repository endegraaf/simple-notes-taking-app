<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Edit Person</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container py-4">
  <h1>Edit {{ person.name }}</h1>
  <form method="post" class="row g-3">
    <input type="hidden" name="id" value="{{ id }}">
    <div class="col-md-2"><input name="name" type="text" class="form-control" value="{{ person.name }}" placeholder={{ person.name }}></div>
    <div class="col-md-2"><input name="age" type="number" class="form-control" value="{{ person.age }}" placeholder="Age"></div>
    <div class="col-md-4"><input name="location" class="form-control" value="{{ person.location }}" placeholder="Location"></div>
    <div class="col-md-6"><input name="school" class="form-control" value="{{ person.school }}" placeholder="School"></div>

    <div class="col-12">
      <label class="form-label">Children</label>
      <div id="children-container">
        {% for child in person.children %}
        <div class="row g-2 mb-2">
          <div class="col"><input name="child_name" class="form-control" value="{{ child.name }}" placeholder="Child Name"></div>
          <div class="col"><input name="child_age" type="number" class="form-control" value="{{ child.age }}" placeholder="Age"></div>
        </div>
        {% endfor %}
      </div>
      <button type="button" class="btn btn-sm btn-outline-primary" onclick="addChild()">Add Another Child</button>
    </div>

    <div class="col-12"><input name="likes" class="form-control" value="{{ person.likes|join(', ') }}" placeholder="Likes (comma-separated)"></div>
    <div class="col-12"><input name="notes" class="form-control" value="{{ person.notes|join(', ') }}" placeholder="Notes (comma-separated)"></div>
    <div class="col-12">
      <button type="submit" class="btn btn-success">Save</button>
      <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">Back to list</a>
    </div>
  </form>
</div>

<script>
function addChild() {
  const container = document.getElementById('children-container');
  const row = document.createElement('div');
  row.className = 'row g-2 mb-2';
  row.innerHTML = `
    <div class="col"><input name="child_name" class="form-control" placeholder="Child Name"></div>
    <div class="col"><input name="child_age" type="number" class="form-control" placeholder="Age"></div>
  `;
  container.appendChild(row);
}
</script>
</body>
</html>
